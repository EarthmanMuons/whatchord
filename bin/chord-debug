#!/usr/bin/env bash
set -euo pipefail

die() {
	printf "ERROR: %s\n" "$*" >&2
	exit 1
}

repo_root=""
if [[ -n ${GITHUB_WORKSPACE-} ]]; then
	repo_root=$GITHUB_WORKSPACE
else
	if command -v git >/dev/null 2>&1; then
		repo_root="$(git rev-parse --show-toplevel 2>/dev/null || true)"
	fi
fi
[[ -n $repo_root ]] || die "Could not determine repository's top-level directory."

##### MAIN

exec dart run "$repo_root/tool/chord_debug.dart" "$@"
